---
puppeteer:
  displayHeaderFooter: true
  headerTemplate: "<div style='font-size: 10px; margin-left: 1cm; width: 100%; text-align: center;'></div>"
  footerTemplate: "<div style='font-size: 10px; margin-left: 1cm; width: 100%; text-align: center;'><span class='pageNumber'></span> / <span class='totalPages'></span></div>"
---

<!-- ---
output: word_document
--- -->

<h1>目次</h1>

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1. システム構成](#1-システム構成)
- [2. 機能一覧](#2-機能一覧)
- [3. インターフェース設計](#3-インターフェース設計)
  - [3.1. 画面インターフェース](#31-画面インターフェース)
    - [3.1.1. ナビゲーション](#311-ナビゲーション)
    - [3.1.2. ホーム](#312-ホーム)
    - [3.1.3. 業務日報一覧](#313-業務日報一覧)
    - [3.1.4. 対象日選択](#314-対象日選択)
    - [3.1.5. 業務日報表示](#315-業務日報表示)
    - [3.1.6. 業務日報作成](#316-業務日報作成)
    - [3.1.7. 業務日報編集](#317-業務日報編集)
    - [3.1.8. 業務日報明細一覧](#318-業務日報明細一覧)
  - [3.2. 帳票インターフェース](#32-帳票インターフェース)
- [4. データ設計](#4-データ設計)
  - [4.1. テーブル](#41-テーブル)
  - [4.2. ファイル](#42-ファイル)
    - [4.2.1. CSV ファイル](#421-csv-ファイル)

<!-- /code_chunk_output -->

<!-- pagebreak -->

# 1. システム構成

# 2. 機能一覧

<!-- pagebreak -->

# 3. インターフェース設計

## 3.1. 画面インターフェース

### 3.1.1. ナビゲーション

**_ナビゲーション > 画面遷移図_**

サービス仕様書参照。以降同様。

### 3.1.2. ホーム

**_ホーム > 画面イメージ_**

サービス仕様書参照。以降同様。
P

### 3.1.3. 業務日報一覧

**_業務日報一覧 > 入出力項目_**

|  #  | C   | 論理名       | 物理名                | IO  | DT     | DF                  | IV  | R   | 内容                               |
| :-: | :-- | :----------- | :-------------------- | :-- | :----- | :------------------ | :-- | :-- | :--------------------------------- |
| 1\* | F   | 報告日       | filter_report_date    | IO  | 日付   | YYYY-mm-dd          | N   |     | テーブルのフィルター条件(完全一致) |
| 2\* | F   | 報告者       | filter_reporter       | IO  | 文字列 |                     | N   |     | テーブルのフィルター条件(部分一致) |
| 3\* | F   | 報告内容     | filter_report_content | IO  | 文字列 |                     | N   |     | テーブルのフィルター条件(部分一致) |
|  4  | T   | 報告日       | report_date           | O   | 日付   | YYYY-mm-dd          | S   | RO  | 業務日報の項目                     |
|  5  | T   | 報告者       | reporter              | O   | 文字列 |                     | S   | RO  | 業務日報の項目                     |
|  6  | T   | 報告内容     | report_content        | O   | 文字列 |                     |     | RO  | 業務日報の項目                     |
|  7  | T   | 更新日時     | updated_at            | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報の項目                     |
|  8  | T   | 作成日時     | created_at            | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報の項目                     |
|  9  | T   | 開始番号     | start_rec_num         | O   | 整数   |                     | S   | RO  | 表示レコードの開始番号             |
| 10  | T   | 終了番号     | end_rec_num           | O   | 整数   |                     | S   | RO  | 表示レコードの終了番号             |
| 11  | T   | レコード件数 | total_num_rec         | O   | 整数   |                     | S   | RO  | フィルター後の総レコード件数       |
| 12  | T   | ページ番号   | \*\_page_num          | O   | 整数   |                     | S   | RO  | 開始〜現在〜終了ページ番号         |

> C(カテゴリー): F=フィルター, T=テーブル, I=入力項目, D=データ項目, P=ページ遷移, U=テーブル更新
> IO(入出力): I=IN, O=OUT
> DT: データタイプ
> DF: データフォーマット
> IV(初期値): N=None, S=Set, 空欄=N/S
> R(制約): RO=Read Only, RI=Required Item
> \*: タブストップ

**_業務日報一覧 > 処理内容_**

|  #  | C   | 論理名       | 物理名         | DT     | 内容                                         |
| :-: | :-- | :----------- | :------------- | :----- | :------------------------------------------- |
|  1  | F   | 絞り込み     | filter_rec     | ボタン | フィルター項目によりレコードを AND 検索する  |
|  2  | F   | リセット     | reset_filter   | ボタン | フィルター項目をクリアし、レコードを検索する |
|  3  | P   | 予定から作成 | disp_head_date | ボタン | 対象日選択へ遷移する                         |
|  4  | P   | 新規作成     | disp_head_new  | ボタン | 業務日報作成へ遷移する                       |
|  5  | P   | 報告日       | disp_head_show | リンク | 業務日報作成へ遷移する                       |
|  6  | U   | テーブル番号 | update_table   | ボタン | 指定されたテーブルを表示する                 |

### 3.1.4. 対象日選択

**_対象日選択 > 入出力項目_**

|  #  | C   | 論理名 | 物理名      | 入出力 | DT   | DF         | 初期値 | R   | 内容       |
| :-: | :-- | :----- | :---------- | :----- | :--- | :--------- | :----- | :-- | :--------- |
| 1\* | I   | 対象日 | report_date | IN     | 日付 | YYYY-mm-dd | なし   | RI  | 作成対象日 |

**_対象日選択 > 処理内容_**

|  #  | C   | 論理名 | 物理名             | DT     | 内容                                                                                                                                                 |
| :-: | :-- | :----- | :----------------- | :----- | :--------------------------------------------------------------------------------------------------------------------------------------------------- |
|  1  | P   | 作成   | create_head_bodies | ボタン | 対象日の予定をインポートし、業務日報および業務日報明細を作成する。作成後、業務日報一覧へ遷移する。業務日報一覧は対象日が含まれているページを表示する |
|  2  | P   | 戻る   | disp_previous_page | ボタン | 前のページへ戻る                                                                                                                                     |

### 3.1.5. 業務日報表示

**_業務日報表示 > 入出力項目_**

|  #  | C   | 論理名       | 物理名                | IO  | DT     | DF                  | IV  | R   | 内容                         |
| :-: | :-- | :----------- | :-------------------- | :-- | :----- | :------------------ | :-- | :-- | :--------------------------- |
|  1  | D   | 報告日       | head_report_date      | O   | 日付   | YYYY-mm-dd          | S   | RO  | 業務日報の項目               |
|  2  | D   | 報告者       | head_reporter         | O   | 文字列 |                     | S   | RO  | 業務日報の項目               |
|  3  | D   | 業務内容     | head_report_content   | O   | 文字列 |                     |     | RO  | 業務日報の項目               |
|  4  | T   | 開始日時     | detail_start_datetime | O   | 日時   | YYYY-mm-dd HH:MM    | S   | RO  | 業務日報明細の項目           |
|  5  | T   | 終了日時     | detail_end_datetime   | O   | 日時   | YYYY-mm-dd HH:MM    | S   | RO  | 業務日報明細の項目           |
|  6  | T   | 業務名       | detail_job_name       | O   | 文字列 |                     |     | RO  | 業務日報明細の項目           |
|  7  | T   | 関与先       | detail_company        | O   | 文字列 |                     | S   | RO  | 業務日報明細の項目           |
|  8  | T   | 報告者       | detail_reporter       | O   | 文字列 |                     | S   | RO  | 業務日報明細の項目           |
|  9  | T   | 更新日時     | detail_updated_at     | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報明細の項目           |
| 10  | T   | 作成日時     | detail_created_at     | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報明細の項目           |
| 11  | T   | 開始番号     | start_rec_num         | O   | 整数   |                     | S   | RO  | 表示レコードの開始番号       |
| 12  | T   | 終了番号     | end_rec_num           | O   | 整数   |                     | S   | RO  | 表示レコードの終了番号       |
| 13  | T   | レコード件数 | total_num_rec         | O   | 整数   |                     | S   | RO  | 総レコード件数               |
| 14  | T   | テーブル番号 | \*\_page_num          | O   | 整数   |                     | S   | RO  | 開始〜現在〜終了テーブル番号 |

**_業務日報表示 > 処理内容_**

|  #  | C   | 論理名       | 物理名             | DT     | 内容                                                                                                      |
| :-: | :-- | :----------- | :----------------- | :----- | :-------------------------------------------------------------------------------------------------------- |
|  1  | P   | 編集         | disp_head_edit     | ボタン | 業務日報編集へ遷移する                                                                                    |
|  2  | P   | 削除         | delete_head_bodies | ボタン | 業務日報および業務日報明細を削除する。削除後、業務日報一覧へ遷移する。業務日報一覧は 1 ページ目を表示する |
|  3  | P   | 戻る         | disp_previous_page | ボタン | 前の画面へ戻る                                                                                            |
|  4  | P   | 明細追加     | disp_body_new      | ボタン | 業務日報明細作成へ遷移する                                                                                |
|  5  | P   | 業務名       | disp_body_show     | リンク | 業務日報明細表示へ遷移する                                                                                |
|  6  | U   | テーブル番号 | update_table       | ボタン | 指定されたテーブルを表示する                                                                              |

### 3.1.6. 業務日報作成

**_業務日報作成 > 入出力項目_**

|  #  | C   | 論理名   | 物理名              | IO  | DT     | DF         | IV  | R   | 内容           |
| :-: | :-- | :------- | :------------------ | :-- | :----- | :--------- | :-- | :-- | :------------- |
| 1\* | D   | 報告日   | head_report_date    | I   | 日付   | YYYY-mm-dd | N   | RI  | 業務日報の項目 |
| 2\* | D   | 報告者   | head_reporter       | I   | 文字列 |            | N   | RI  | 業務日報の項目 |
| 3\* | D   | 業務内容 | head_report_content | I   | 文字列 |            | N   |     | 業務日報の項目 |

**_業務日報作成 > 処理内容_**

|  #  | 区分       | 論理名 | 物理名             | DT     | 内容                                                                               |
| :-: | :--------- | :----- | :----------------- | :----- | :--------------------------------------------------------------------------------- |
|  1  | ページ遷移 | 作成   | create_head        | ボタン | 業務日報編集へ遷移する。処理後、業務日報一覧は対象日が含まれているページを表示する |
|  3  | ページ遷移 | 戻る   | disp_previous_page | ボタン | 前の画面へ戻る                                                                     |

### 3.1.7. 業務日報編集

**_業務日報編集 > 入出力項目_**

|  #  | C   | 論理名   | 物理名              | IO  | DT     | DF         | IV  | R   | 内容           |
| :-: | :-- | :------- | :------------------ | :-- | :----- | :--------- | :-- | :-- | :------------- |
| 1\* | D   | 報告日   | head_report_date    | IO  | 日付   | YYYY-mm-dd |     | RI  | 業務日報の項目 |
| 2\* | D   | 報告者   | head_reporter       | IO  | 文字列 |            |     | RI  | 業務日報の項目 |
| 3\* | D   | 業務内容 | head_report_content | IO  | 文字列 |            |     |     | 業務日報の項目 |

**_業務日報編集 > 処理内容_**

|  #  | 区分       | 論理名 | 物理名             | DT     | 内容                                               |
| :-: | :--------- | :----- | :----------------- | :----- | :------------------------------------------------- |
|  1  | ページ遷移 | 変更   | disp_head_edit     | ボタン | 業務日報を変更する。処理後、業務日報表示へ遷移する |
|  2  | ページ遷移 | 戻る   | disp_previous_page | ボタン | 前の画面へ戻る                                     |

### 3.1.8. 業務日報明細一覧

**_業務日報明細一覧 > 入出力項目_**

|  #  | C   | 論理名       | 物理名                | IO  | DT     | DF                  | IV  | R   | 内容                               |
| :-: | :-- | :----------- | :-------------------- | :-- | :----- | :------------------ | :-- | :-- | :--------------------------------- |
| 1\* | F   | 報告日       | filter_report_date    | IO  | 日付   | YYYY-mm-dd          |     |     | テーブルのフィルター条件(完全一致) |
| 2\* | F   | 業務名       | filter_job_name       | IO  | 文字列 |                     |     |     | テーブルのフィルター条件(部分一致) |
| 3\* | F   | 関与先       | filter_company        | IO  | 文字列 |                     |     |     | テーブルのフィルター条件(部分一致) |
| 4\* | F   | 報告者       | filter_reporter       | IO  | 文字列 |                     |     |     | テーブルのフィルター条件(部分一致) |
|  5  | T   | 開始日時     | detail_start_datetime | O   | 日時   | YYYY-mm-dd HH:MM    | S   | RO  | 業務日報明細の項目                 |
|  6  | T   | 終了日時     | detail_end_datetime   | O   | 日時   | YYYY-mm-dd HH:MM    | S   | RO  | 業務日報明細の項目                 |
|  7  | T   | 業務名       | detail_job_name       | O   | 文字列 |                     |     | RO  | 業務日報明細の項目                 |
|  8  | T   | 関与先       | detail_company        | O   | 文字列 |                     | S   | RO  | 業務日報明細の項目                 |
|  9  | T   | 報告者       | detail_reporter       | O   | 文字列 |                     | S   | RO  | 業務日報明細の項目                 |
| 10  | T   | 更新日時     | detail_updated_at     | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報明細の項目                 |
| 11  | T   | 作成日時     | detail_created_at     | O   | 日時   | YYYY-mm-dd HH:MM:SS | S   | RO  | 業務日報明細の項目                 |
| 12  | T   | 開始番号     | start_rec_num         | O   | 整数   |                     | S   | RO  | 表示レコードの開始番号             |
| 13  | T   | 終了番号     | end_rec_num           | O   | 整数   |                     | S   | RO  | 表示レコードの終了番号             |
| 14  | T   | レコード件数 | total_num_rec         | O   | 整数   |                     | S   | RO  | 総レコード件数                     |
| 15  | T   | テーブル番号 | \*\_page_num          | O   | 整数   |                     | S   | RO  | 開始〜現在〜終了テーブル番号       |

**_業務日報明細一覧 > 処理内容_**

|  #  | 区分         | 論理名       | 物理名         | DT     | 内容                                         |
| :-: | :----------- | :----------- | :------------- | :----- | :------------------------------------------- |
|  1  | フィルター   | 絞り込み     | filter_rec     | ボタン | フィルター項目によりレコードを AND 検索する  |
|  2  | フィルター   | リセット     | reset_filter   | ボタン | フィルター項目をクリアし、レコードを検索する |
|  5  | ページ遷移   | 業務名       | disp_body_show | リンク | 業務日報明細一覧へ遷移する                   |
|  6  | テーブル更新 | テーブル番号 | update_table   | ボタン | 指定されたテーブルを表示する                 |

## 3.2. 帳票インターフェース

本サービスで出力すべき帳票は全て CSV ファイル経由で実施する。
CSV ファイルの詳細については、データ設計のファイルを参照。

<!-- pagebreak -->

# 4. データ設計

## 4.1. テーブル

テーブル定義書参照。

## 4.2. ファイル

### 4.2.1. CSV ファイル

**_CSV ファイル > 全体進捗状況 CSV ファイル_**

**_CSV ファイル > 個社別進捗状況 CSV ファイル_**
